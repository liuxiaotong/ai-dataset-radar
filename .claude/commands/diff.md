# 报告对比

对比两次 Radar 扫描报告，展示新增、消失和变化最大的项目。

## 参数

$ARGUMENTS - 可选，两个日期（如 `2026-02-01 2026-02-08`）。不提供则自动对比最近两次报告。

## 执行步骤

### 第一步：定位报告

**如果提供了日期参数**：在 `data/reports/{日期}/` 下查找对应的 JSON 报告。

**如果未提供参数**：找到最近两个日期子目录的 JSON 报告：

```bash
ls -d /Users/liukai/ai-dataset-radar/data/reports/2*/ 2>/dev/null | sort -r | head -2
```

然后在每个日期目录中查找 `intel_report_*.json`。

如果只有一份报告，提示用户需要至少两次扫描才能对比。

### 第二步：读取两份 JSON 报告

读取较早的报告（Report A）和较晚的报告（Report B）。

### 第三步：对比分析

执行以下对比：

**1. 数据集对比**：
- **新增**：在 B 中但不在 A 中（按 dataset `id` 匹配）
- **消失**：在 A 中但不在 B 中
- **下载量变化**：两份报告中都出现的数据集，计算下载量变化（增量和增长率）

**2. GitHub 对比**：
- 新增仓库（按 `full_name` 匹配）
- 消失仓库
- Stars 变化最大的仓库

**3. 论文对比**：
- 新增论文（按 `title` 匹配）

**4. 博客/X 对比**：
- 新增博客文章
- 新增 X 推文动态

### 第四步：输出对比报告

```
## 报告对比：{日期A} → {日期B}

### 概况
| 维度 | {日期A} | {日期B} | 变化 |
|------|---------|---------|------|
| 数据集 | N | N | +N/-N |
| GitHub 仓库 | N | N | +N/-N |
| 论文 | N | N | +N/-N |

### 新增数据集
| 数据集 | 组织 | 类别 | 下载量 | 发布日期 |
|--------|------|------|--------|----------|
| ... |

### 消失数据集
| 数据集 | 组织 | 类别 | 原因推测 |
|--------|------|------|----------|
| ... |

### 下载量变化 Top 5
| 数据集 | {日期A} | {日期B} | 增长 | 增长率 |
|--------|---------|---------|------|--------|
| ... |

### 新增论文
| 标题 | 日期 | 来源 |
|------|------|------|
| ... |

### 总结
[2-3 句分析：本期最显著的变化是什么？有什么趋势信号？]
```

## 注意

- 对比基于 `id`（数据集）、`full_name`（GitHub）、`title`（论文）匹配
- 消失不一定是被删除，可能是超出了扫描的时间窗口
- 如需更深入分析某个变化，建议使用 `/deep-dive`
